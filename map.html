<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8"/>
	<title>Daum 지도 시작하기</title>
</head>
<body>
    <!-- 지도를 표시할 div -->
    <div id="map" style="width:500px;height:400px;"></div>
    <!-- 지도 키 값 받아오기 -->
	<script type="text/javascript" src="//dapi.kakao.com/v2/maps/sdk.js?appkey=922b804a1e5a9b89656db406da17e07d&libraries=services"></script>
	<script>
		var container = document.getElementById('map');
		var options = {
            // 위도와 경도를 입력하여 지도의 시작위치 표시
            center: new daum.maps.LatLng(33.450701, 126.570667),
            // 지도의 확대 정도, 자연수 값
			level: 3
		};
        // container와 options를 넘겨주어 지도 생성
        var map = new daum.maps.Map(container, options);
        // 맵 중앙의 좌표를 받아와서 마커 생성
        var marker = new daum.maps.Marker({
            position: map.getCenter()
        });

        // 주소-좌표 변환 객체를 생성
        var geocoder = new daum.maps.services.Geocoder();
        
        // 클릭한 위치에 대한 주소를 표시할 인포윈도우
        var infowindow = new daum.maps.InfoWindow({zindex:1});
        // 지도 좌측 상단에 주소 표시
    //     searchAddrFromCoords(map.getCenter(),displayCenterInfo);
    //     function displayCenterInfo(result, status) {
    //         if (status === daum.maps.services.Status.OK) {
    //         var infoDiv = document.getElementById('centerAddr');

    //         for(var i = 0; i < result.length; i++) {
    //         // 행정동의 region_type 값은 'H' 이므로
    //         if (result[i].region_type === 'H') {
    //             infoDiv.innerHTML = result[i].address_name;
    //             break;
    //         }
    //     }
    // }    

        
        
        // 지도에 마커 표시
        marker.setMap(map);
        
        //위도와 경도
        var latitude;
        var longitude;
        
        
        // 마크가 언제까지 움직일 지 결정하기 위한 변수
        var count = 0;
        
        // 마크를 중지시키기 위한 변수
        var markerInterval;

        

        // 지도에 클릭 이벤트 등록 및 마지막 파라미터로 넘어온 함수 호출
        daum.maps.event.addListener(map, 'click', function(mouseEvent){
            // 클릭한 위도, 경도 정보 가져오기
            var latlng = mouseEvent.latLng;
            
            // 마커 위치를 클릭한 위치로 이동
            marker.setPosition(latlng);
            
            position_list = [];    

            latitude = latlng.getLat(); //type 은 number
            longitude = latlng.getLng(); 
            position_list.push(latitude);
            position_list.push(longitude);
            
            var check = '위도는' + latitude + ' 경도는' + longitude;
            // console.log(typeof(latitude));
            console.log(check); // console 에서 확인
            
            // 마크 움직이기
            // 당 moveMarkerPosition 함수를 실행
            markerInterval = setInterval(moveMarkerPosition, 500); // 600이 1초인거같음
         } )
         function moveMarkerPosition() {
            count = count + 1;
            // 위치를 변화시킴 지금은 기울기 1로 움직이지만 도착지점이 정해지면 그에 맞춰서 바꿔주자.
            var now_position = new daum.maps.LatLng(latitude+count*0.00001 , longitude+count*0.00001);
            // 변한 위치에 대하여 marker를 다시 찍어줌
            marker.setPosition(now_position);  
            
            if(count>5) {
                // 5번 이동을 하면 중지시킨다.
                clearInterval(markerInterval);
            }
        }
	</script>
</body>
</html>


<!-- 

위치 찍었을 때 위치 정보가져오기 - 해결

그 위치를 바탕으로 가장 가까운 위치 가져오기

gps 실시간으로 받아서 지도에 마킹하기 - 해결

-->